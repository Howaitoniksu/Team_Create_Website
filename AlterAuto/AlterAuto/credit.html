<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./assets/styles/style.css">
    <title>Расчет кредита</title>
    <style>
        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
            color: white;
        }
        #results {
            margin-top: 20px; 
            display: none; /* Сначала скрываем результаты */
        }
        .big_con {
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 0.5s ease; /* Добавляем плавный переход */
        }
        .big_con.hidden {
            opacity: 0; /* Скрываем при переходе */
        }
    </style>
</head>
<body>
    <div class="big_con" id="main-container"> 
        <div class="block_auth">
            <h2 style="color: black; padding: 0;">Расчет кредита</h2>
            <input type="number" id="vehicle-price" placeholder="Введите стоимость автомобиля" class="enter">
            <input type="number" id="loan-term" placeholder="Срок кредита (в месяцах)" class="enter">
            <button class="orange" onclick="calculateCredit()">
                Рассчитать
            </button>
        </div>
        <span class="close-btn" onclick="window.location.href='main.html'">&#10006;</span> 
    </div>

    <div id="results" style="display: none;">
        <h3>Результаты расчета</h3>
        <p>Ежемесячный платеж: <span id="monthly-payment"></span></p>
        <p>Переплата по процентам: <span id="total-interest"></span></p>
        <p>Общая сумма выплат: <span id="total-payment"></span></p>
    </div>

    <script>
        function calculateCredit() {
            const vehiclePrice = parseFloat(document.getElementById('vehicle-price').value);
            const loanTerm = parseFloat(document.getElementById('loan-term').value);

            // Проверка ввода
            if (isNaN(vehiclePrice) || vehiclePrice <= 0 || isNaN(loanTerm) || loanTerm <= 0) {
                alert("Пожалуйста, введите корректные значения стоимости автомобиля и срока кредита.");
                return; 
            }

            let interestRate;
            if (loanTerm >= 3 && loanTerm <= 6) {
                interestRate = 0.09;
            } else if (loanTerm >= 6 && loanTerm <= 9) {
                interestRate = 0.13;
            } else {
                interestRate = 0.15;
            }

            const monthlyPayment = (vehiclePrice * interestRate / 12 + vehiclePrice / loanTerm).toFixed(2);
            const totalInterest = ((vehiclePrice * interestRate * loanTerm) / 12).toFixed(2);
            const totalPayment = (vehiclePrice + totalInterest).toFixed(2);

            document.getElementById('monthly-payment').innerText = monthlyPayment + ' уб.';
            document.getElementById('total-interest').innerText = totalInterest + ' уб.';
            document.getElementById('total-payment').innerText = totalPayment + ' уб.';

            document.getElementById('main-container').classList.add('hidden'); // Скрываем форму
            document.getElementById('results').style.display = 'block'; // Показываем результаты
        }
    </script>
</body>
</html>
