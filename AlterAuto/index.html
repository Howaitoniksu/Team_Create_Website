<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./assets/styles/style.css">
    <title>Авторизация</title>
</head>
<body>
    <div class="big_con" style="height: 100vh; display: flex; justify-content: center; align-items: center;">
        <div class="block_auth">
            <h2 style="color: black; padding: 0;">АВТОРИЗАЦИЯ</h2>
            <input type="tel" placeholder="phone" class="enter">
            <button type="submit" onclick="sendSms()">Получить код</button>
            <div id="message" style="display:none;"></div>
            <script>
                function generateRandomCode() {
                    let code = "";
                    for (let i = 0; i < 6; i++) {
                        code += Math.floor(Math.random() * 10);
                    }
                    return code;
                }
                function sendSms() {
                    const phoneNumber = document.querySelector('.enter').value;
                    const code = generateRandomCode();
                    // Формируем URL для отправки SMS
                    const apiKey = 'TnJMkOMQlkIujqACXdndOgquVdy2';
                    const url = `https://gate.smsaero.ru/v2/sms/send?number=${phoneNumber}&text=${encodeURIComponent('Ваш код: ' + code)}&api_key=${apiKey}&sign=SMS%20Aero`;
                    const ur2 = 'https://email:api_key@gate.smsaero.ru/v2/sms/send?number=79990000000&text=your+text&sign=SMS Aero'
                    // Отправляем запрос на сервер
                    const xhr = new XMLHttpRequest();
                    xhr.open('GET', url, true);
                    xhr.onload = function() {
                        if (xhr.status === 200) {
                            console.log(`SMS отправлено на номер ${phoneNumber}: Код - ${code}`);
                            document.getElementById('message').style.display = 'block';
                            document.getElementById('message').innerText = 'Код отправлен на номер ' + phoneNumber;
                        } else {
                            console.error(`Ошибка отправки SMS на номер ${phoneNumber}: ${xhr.statusText}`);
                            document.getElementById('message').style.display = 'block';
                            document.getElementById('message').innerText = 'Ошибка отправки кода';
                        }
                    };
                    xhr.onerror = function() {
                        console.error(`Ошибка запроса на отправку SMS на номер ${phoneNumber}`);
                        document.getElementById('message').style.display = 'block';
                        document.getElementById('message').innerText = 'Ошибка запроса кода';
                    };
                    xhr.send();
                }
            </script>
            <p class="p14">Еще не с нами? <a href="registration.html"><u>Зарегистрируйтесь!</u></a></p>
        </div>
    </div>
</body>
</html>